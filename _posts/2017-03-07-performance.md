---
layout: post
title: '网页性能初体验(Performance)'
---
网页性能可以从多方面，多维度来评估。
<!--break-->
# 网页性能初体验(Performance) 

### 1、浏览器是如何构建页面的？---浏览器加载解析渲染
####   浏览器加载过程
1.浏览器输入网址  
2.浏览器根据域名解析ip地址  
3.给web服务器建立TCP连接，然后发送http请求。  
4.服务器的永久重定向响应    
服务器给浏览器响应一个301永久重定向响应，这样浏览器就会访问“http://www.facebook.com/” 而非“http://facebook.com/”  
5.浏览器跟踪重定向地址，并发送一个http请求。  
6.服务器处理请求，发回HTML响应。  
7.释放TCP连接，浏览器解析HTML内容。  

####   浏览器渲染过程
解析html构建dom树->解析css，生成css规则树->css规则树和dom树一起构建render树（渲染树）->Layout（计算每个节点在屏幕中的位置）->绘制render树（绘制每个节点）  
概念：回流：当它发现了某个部分发生了变化影响了布局，那就需要倒回去重新渲染。  
重绘：如果只是改变了某个元素的背景颜色，文字颜色等，不影响元素周围或内部布局的属性，将只会引起浏览器的repaint，重画某一部分。  

####  \*压缩js，css文件	  
css、js优化，使用压缩工具进行打包压缩，减小文件体积，并能合并为一个文件，这样浏览器能减少请求次数，请求文件大小。项目中使用gulp，webpack 压缩工具。  

####  \*控制资源文件加载优先级    
浏览器解析html是从上往下，CSS 提前加载，把js放在body底部。
####  \*利用浏览器缓存
####  \*图片优化
使用图标字体代替图片，

### 2、浏览器性能工具 ---chrome devtools timeline 
#### 2.1、工具栏  
<img src="/../assets/performace01-timeline.png"> 
<br/>
capture后面的的选项分别是：网络、js简介、截图、存储、描绘  
用户可以选者需要捕获的选项
#### 2.2、信息栏  
<img src="/../assets/performace-02.png"> 
<br/>
1：FPS 每秒刷新频率
浏览器刷新频率是60次／秒，如果页面有动画或者渐变效果，那么浏览器渲染动画或页面的每一帧时间要在1秒/60次 = 16毫秒以内，这样我们才不会感觉到卡顿，实际每帧的时间大约为10秒，因为浏览器还要做一些渲染队列管理，渲染线程切换等。  
2:CPU cpu资源占用   
表明消耗cpu资源 

3:NET  
不同颜色代表不同资源请求  
浅色代表资源请求被发送到收到第一个响应字节的时间，深色代表从收到第一个字节到这个资源完全下载完成。  


