<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<link rel="stylesheet" href="/styles/css/index.css">
		<title>浏览器的工作原理</title>
　　</head>
　　<body>
　　　　	<div class="container">
	<div class="left">
		<div class="content">
			<div class="logo">
				<img src="/../assets/logo.jpg" alt="logo">
			</div>
			<div class="motto">依你之萍</div>
			<div class="navigation">
				<span class="btn pink">
					<a href="http://localhost:4000">
						<img src="/../assets/home.png" alt="home">
					</a>
				</span>
				<span class="btn white">
					<a href="http://weibo.com/u/2627764953" target="_blank">
						<img src="/../assets/weibo.png" alt="weibo">
					</a>
				</span>
				<span class="btn pink">
					<a href="https://github.com/winnieping" target="_blank">
						<img src="/../assets/github.png" alt="github">
					</a>
				</span>
				<span class="btn white">
					<a href="/2016/02/01/list.html">
						<img src="/../assets/note.png" alt="note">
					</a>
				</span>
			</div>
		</div>
	</div>
	<div class="right">
		<p>浏览器的工作原理
<!--break--></p>
<h3 id="浏览器的工作原理">浏览器的工作原理</h3>

<h4 id="一浏览器的组成">一、浏览器的组成</h4>

<p><img src="../assets/browser.png" alt="browser" /></p>

<p>浏览器的主要组件：</p>

<p>1、用户界面</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>地址栏、前进后退按钮、书签、菜单等
</code></pre></div></div>

<p>2、浏览器引擎</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>在用户界面与渲染引擎之间传送指令
</code></pre></div></div>

<p>3、渲染引擎</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>从网络层获取请求文档的内容，开始解析渲染。主要步骤如下：
构建DOM树 + 构建CSSOM树 -&gt; render树 -&gt; 布局 -&gt; 绘制
</code></pre></div></div>

<p>4、网络</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>用来完成网络调用，例如http请求，它具有平台无关的接口，可以在不同平台上工作
</code></pre></div></div>

<p>5、UI后端</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>用来绘制类似组合选择框及对话框等基本组件，具有不特定于某个平台的通用接口，底层使用操作系统的用户接口
</code></pre></div></div>

<p>6、javascript解释器</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
</code></pre></div></div>

<p>7、数据存储</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>属于持久层，浏览器需要在硬盘中保存类似cookie的各种数据，HTML5定义了web database技术，这是一种轻量级完整的客户端存储技术
</code></pre></div></div>

<p>####二、浏览器的进程与线程</p>

<table>
  <thead>
    <tr>
      <th>CPU</th>
      <th>进程</th>
      <th>线程</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>计算机的核心</td>
      <td>CPU所能处理的单个任务</td>
      <td>进程中单一的顺序控制</td>
    </tr>
  </tbody>
</table>

<p>多进程：比如一边听歌，一边写代码</p>

<p>多线程：同一程序运行多个线程</p>

<p>浏览器是多进程架构，常驻线程有以下几个：</p>

<p>1、GUI渲染线程</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>负责渲染浏览器界面HTML元素,当界面需要重绘(Repaint)或由于某种操作引发回流(reflow)时,该线程就会执行。在Javascript引擎运行脚本期间,GUI渲染线程都是处于挂起状态的,也就是说被”冻结”了。
</code></pre></div></div>

<p>2、Javascript引擎线程</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>负责解析Javascript脚本，运行代码.
是单线程
</code></pre></div></div>

<p><strong>GUI渲染线程与JavaScript引擎线程是互斥的。</strong></p>

<p>3、定时触发器线程</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>浏览器定时计数器并不是由JavaScript引擎计数的, 因为JavaScript引擎是单线程的, 如果处于阻塞线程状态就会影响记计时的准确, 因此通过单独线程来计时并触发定时是更为合理的方案。
</code></pre></div></div>

<p>4、事件触发线程</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>当一个事件被触发时该线程会把事件添加到待处理队列的队尾，等待JS引擎的处理。这些事件可以是当前执行的代码块如定时任务、也可来自浏览器内核的其他线程如鼠标点击、AJAX异步请求等，但由于JS的单线程关系所有这些事件都得排队等待JS引擎处理。
</code></pre></div></div>

<p>5、异步Http请求线程</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>在XMLHttpRequest在连接后是通过浏览器新开一个线程请求， 将检测到状态变更时，如果设置有回调函数，异步线程就产生状态变更事件放到 JavaScript引擎的处理队列中等待处理。
</code></pre></div></div>


	</div>
</div>


　　</body>
</html>
